{
  "hash": "4292f0cba46eb34f89a2fb8d1667c3e7",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Bibi in Texas\"\nsubtitle: \"ou: sobrevivendo ao calor texano e as variações do dólar\"\ndate: \"2023-06-02\"\ncategories: \n# exemplo de categorias:\n  - \"Calor\"\n  - \"R\"\n  - \"Intercâmbio\"\n  - \"Intercâmbio\"\nlang: pt\ntoc: true \n#draft: true \n---\n\n\n\nEstive em Austin durante quatro meses em 2022. Entre setembro e dezembro, a Bia aqui precisou lidar com situações nunca antes vividas (#PerrengueChique), como o calor texano e acompanhar as variações do dólar.\n\nNa tentativa de treinar minha fluência no Tidyverse e conhecer outros pacotes do R, transformei meus inimigos em dados.\n\n## Tá calor até de noite\n\nComeçando com as altas temperaturas, \n\n::: {.cell}\n\n```{.r .cell-code}\n#Carregando os pacotes\nlibrary(tidyverse) #para lidar com os dados (ggplot tá aí!)\nlibrary(lubridate) #para lidar com as datas\nlibrary(weathermetrics) #para converter a temperatura\nlibrary(janitor) #clean_names\nlibrary(ggthemes) #outros temas\nlibrary(bbplot) #outros temas\n```\n:::\n\n\n\nAqui fui apresentada ao pacote weathermetrics, que converte Fahrenheit para Celsius. Afinal, aqui é BR.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# cria o objeto data e coloca os dados do CSV\ndata <- read.csv2(\"data-raw/3180668.csv\",sep=',') |>\n  clean_names()\n\n# uma olhadinha nos dados\ndata  |>\n  glimpse()\n## Rows: 348\n## Columns: 19\n## $ station <chr> \"USW00013958\", \"USW00013958\", \"USW00013958\", \"USW00013958\", \"U…\n## $ name    <chr> \"AUSTIN CAMP MABRY, TX US\", \"AUSTIN CAMP MABRY, TX US\", \"AUSTI…\n## $ date    <chr> \"2022-01-01\", \"2022-01-02\", \"2022-01-03\", \"2022-01-04\", \"2022-…\n## $ awnd    <chr> \"4.92\", \"8.72\", \"1.79\", \"3.36\", \"1.34\", \"6.93\", \"2.01\", \"2.01\"…\n## $ pgtm    <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n## $ prcp    <chr> \"0.00\", \"0.00\", \"0.00\", \"0.00\", \"0.00\", \"0.00\", \"0.02\", \"0.12\"…\n## $ snow    <chr> \"0.0\", \"0.0\", \"0.0\", \"0.0\", \"0.0\", \"0.0\", \"0.0\", \"0.0\", \"0.0\",…\n## $ snwd    <chr> \"0.0\", \"0.0\", \"0.0\", \"0.0\", \"0.0\", \"0.0\", \"0.0\", \"0.0\", \"0.0\",…\n## $ tavg    <lgl> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n## $ tmax    <int> 78, 48, 57, 67, 74, 56, 42, 63, 64, 59, 51, 66, 75, 78, 64, 63…\n## $ tmin    <int> 38, 25, 28, 36, 42, 34, 28, 42, 48, 41, 41, 43, 40, 43, 41, 34…\n## $ wdf2    <int> 330, 340, 120, 200, 290, 10, 10, 220, 360, 360, 20, 130, 300, …\n## $ wdf5    <int> 320, 330, 120, 210, 300, 360, 330, 180, 360, 360, 30, 150, 290…\n## $ wsf2    <chr> \"16.1\", \"18.1\", \"8.1\", \"14.1\", \"8.9\", \"15.0\", \"8.1\", \"8.9\", \"1…\n## $ wsf5    <chr> \"33.1\", \"35.1\", \"13.0\", \"28.0\", \"14.1\", \"30.0\", \"14.1\", \"17.0\"…\n## $ wt01    <int> 1, NA, NA, NA, NA, NA, 1, 1, 1, NA, NA, NA, NA, NA, NA, NA, NA…\n## $ wt02    <int> NA, NA, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA,…\n## $ wt03    <int> NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n## $ wt08    <int> 1, NA, NA, NA, NA, NA, 1, NA, NA, NA, NA, NA, NA, NA, NA, NA, …\n\n# converte os dados de fahrenheit para celsius\ndata$tmin <- fahrenheit.to.celsius(data$tmin)\ndata$tmax <- fahrenheit.to.celsius(data$tmax)\n```\n:::\n\nEm seguida, selecionei as colunas de interesse para mostrar a partir do dia que cheguei em Austin (7 de setembro):\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#selecionando as colunas de interesse e filtrando o período que eu vou analisar\ndata_clean <- data |> \n  select(\n    date,\n    tmax,\n    tmin\n  ) |>  \n  filter(\n    date > \"2022-09-06\")\n\n\ndata_clean |> \n  write_rds(\"data-processed/01-weather.rds\")\n```\n:::\n\n\nDepois transformei num gráfico! Minha intenção foi mostrar a amplitude térmica entre \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata_clean$date <- as.Date(data_clean$date, format = \"%Y-%m-%d\")\n\n# Encontrar a data mínima e máxima para criar uma sequência de primeiros dias de cada mês.\ndata_range <- range(data_clean$date, na.rm = TRUE)\nstart_dates <- seq(from = floor_date(min(data_range), \"month\"), \n                   to = ceiling_date(max(data_range), \"month\"),\n                   by = \"1 month\")\n\n# Supondo que 'data_clean' já está com 'date' no formato Date\n# Encontrar os dias com os valores desejados\ndia_com_menor_temperatura <- data_clean %>% filter(tmin == min(tmin))\ndia_com_maior_temperatura <- data_clean %>% filter(tmax == max(tmax))\ndia_com_maior_amplitude <- data_clean %>% mutate(amplitude = tmax - tmin) %>% filter(amplitude == max(amplitude))\n\n# Cria o gráfico\nfigura <- ggplot(data_clean, aes(x = date)) + \n  geom_segment(aes(x = date, xend = date, y = tmin, yend = tmax)) +\n  geom_point(aes(y = tmin), color = \"lightblue\", size = 3) +\n  geom_point(aes(y = tmax), color = \"orange\", size = 3) +\n  bbc_style() +\n  labs(title = \"Põe o casaco, tira o casaco\",\n       subtitle = \"Registros de temperaturas mínima e máxima em cada dia que estive em Austin, capital do Texas\",\n       x = \"Dia\", \n       y = \"Temperatura (°C)\") +\n  scale_x_date(date_breaks = \"1 month\", date_labels = \"%b-%y\") +\n  geom_vline(data = data.frame(date = seq(min(data_clean$date), max(data_clean$date), by = \"1 month\")),\n             aes(xintercept = date), linetype = \"dashed\", color = \"gray\") +\n  geom_label(data = dia_com_menor_temperatura, aes(x = date, y = tmin, label = \"Menor Temp\"), \n             vjust = -1.5, color = \"blue\") +\n  geom_label(data = dia_com_maior_temperatura, aes(x = date, y = tmax, label = \"Maior Temp\"), \n             vjust = 1.5, color = \"red\") +\n  geom_label(data = dia_com_maior_amplitude, aes(x = date, y = (tmin + tmax) / 2, label = \"Maior Amplitude\"), \n             vjust = 1.5, color = \"green\") +\n  theme(axis.text.x = element_text(angle = 45, vjust = 0.5))\n\n# Após a construção do objeto figura, você pode exibi-lo ou salvá-lo.\nfigura\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n## Recebendo em Real, gastando em Dólar\n\nMeu período nos EUA foi bancado, em grande parte, pela bolsa de intercâmbio que recebi da Agência USP de Inovação. Como eu iria para os EUA (um lugar um pouco caro, rs), minha bolsa era uma das maiores, R$36 mil. Muita grana. Nunca vi tudo isso kk me senti rica por algumas semanas, mas isso acabou quando a realidade do dólar valendo mais de cinco reais tirou a minha alegria e a esperança de voltar cheia de produtinhos do exterior.\n\nVocê pode ter uma ideia dos meus gastos no relatório que fiz pra Comissão de Relações Internacionais da ECA-USP. Mas também pode me chamar pra papear! Ir para o exterior sem qualquer experiência ou proximidade com pessoas de fora me deixou bem perdida inicialmente. Vamos nos ajudar :)\n\nDepois de chorar ao perceber que o dinheiro da bolsa *não era tanto assim* para o básico e muito menos para gastos extras, fui atrás de uns trampos como freelancer para veículos brasileiros. Ajudou muito! Mas ainda recebia em real e gastava em dólar. \n\nCom esse contexto todo, apresento um gráfico que mostra dados históricos da taxa de câmbio entre o dólar americano (USD) e o real brasileiro (BRL). Normalmente, esses dados incluem informações como data, e valores de abertura, fechamento, máximo, mínimo e variação para cada período considerado (geralmente diário).\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# cria o objeto data e coloca os dados do CSV\ndata <- read_csv(\"data-raw/USD_BRL Historical Data.csv\") |>\n  clean_names()\n\n# uma olhadinha nos dados\ndata  |>\n  glimpse()\n## Rows: 55\n## Columns: 7\n## $ date           <chr> \"09/07/2022\", \"09/08/2022\", \"09/09/2022\", \"09/12/2022\",…\n## $ price          <dbl> 5.2480, 5.2141, 5.1477, 5.0930, 5.1911, 5.1631, 5.2470,…\n## $ open           <dbl> 5.2507, 5.2483, 5.2143, 5.1477, 5.0918, 5.1922, 5.1644,…\n## $ high           <dbl> 5.2507, 5.2523, 5.2146, 5.1477, 5.2092, 5.1986, 5.2502,…\n## $ low            <dbl> 5.2483, 5.1783, 5.1378, 5.0834, 5.0766, 5.1495, 5.1641,…\n## $ vol            <chr> \"34.56K\", \"195.76K\", \"151.12K\", \"126.68K\", \"177.68K\", \"…\n## $ change_percent <chr> \"-0.09%\", \"-0.65%\", \"-1.27%\", \"-1.06%\", \"1.93%\", \"-0.54…\n\nfigura <- data %>%\n  ggplot() +\n  aes(x = factor(date)) +\n  geom_segment(aes(x=date, xend=date, y=low, yend=high)) +\n  geom_point( aes(x=date, y=low), color=\"#007f7f\", size=4 ) +\n  geom_point( aes(x=date, y=high), color=\"orange\", size=4) +\n  theme_clean()+\n  labs(title = \"TÍTULO\", subtitle=\"Subtitulo\", x = \"Dia\", y = \"Preço\")\n\nfigura +\n  theme(axis.title.y = element_text(size = 15), axis.title.x = element_text(size = 15), plot.title = element_text(size = 20, face = \"bold\"))\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"figura.png\", plot = figura)\n```\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}